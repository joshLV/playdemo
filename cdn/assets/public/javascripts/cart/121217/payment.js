$(function(){var d=$("#do_not_need_epay").val();$("#use_balance").click(function(){if($(this).attr("checked")=="checked"){if(d=="1"){$("#other-pay").css("display","none");$("#confirm-pay").css("display","block")}}else{if(d=="1"){$("#other-pay").css("display","block");$("#confirm-pay").css("display","none")}}});$("#confirm").click(function(g){g.preventDefault();var f=$("input[name=paymentSourceCode]:checked");if(f.length==0){if($("#onlinepay-error").length!=0){$("#onlinepay-error").show()}else{$(".onlinepay-bd").append('<span id="onlinepay-error" style="padding:2px;color:#f00">请选择支付方式</span>')}}else{$("#confirm_form").submit()}});var e=0,c=0,b=Number($("#j_total-money").text()),a=$("#j_selected-voucher");$("#j_voucher").delegate("a, input","click",function(){var f=$(this);if(f.hasClass("use")){$(".voucher-box").show()}else{if(f.attr("data-facevalue")){if(e>=b){if(f.attr("checked")=="checked"){f.attr("checked",false);a.html("已选择<em>"+c+"</em>张抵用券，抵扣<em>"+e+"</em>元，不要再点了哦，再点就浪费了！")}else{c--;e-=Number(f.attr("data-facevalue"));if(c==0){a.html("请选择要使用的抵用券")}else{a.html("已选择<em>"+c+"</em>张抵用券，抵扣<em>"+e+"</em>元")}}}else{if(f.attr("checked")=="checked"){c++;e+=Number(f.attr("data-facevalue"));a.html("已选择<em>"+c+"</em>张抵用券，抵扣<em>"+e+"</em>元")}else{c--;e-=Number(f.attr("data-facevalue"));if(c==0){a.html("请选择要使用的抵用券")}else{a.html("已选择<em>"+c+"</em>张抵用券，抵扣<em>"+e+"</em>元")}}}}}})});