$(function(){var d=$("#do_not_need_epay").val();$("#use_balance").click(function(){if($(this).attr("checked")=="checked"){if(d=="1"){$("#other-pay").css("display","none");$("#confirm-pay").css("display","block")}}else{if(d=="1"){$("#other-pay").css("display","block");$("#confirm-pay").css("display","none")}}});$("#confirm").click(function(i){i.preventDefault();var h=$("input[name=paymentSourceCode]:checked");if(h.length==0){if($("#onlinepay-error").length!=0){$("#onlinepay-error").show()}else{$(".onlinepay-bd").append('<span id="onlinepay-error" style="padding:2px;color:#f00">请选择支付方式</span>')}}else{$("#confirm_form").submit()}});var f=0,b=0,g=Number($("#j_total-money").text()),e=Number($("#balance").text()),a=$("#j_selected-voucher");$("#j_voucher").delegate("a, input","click",function(){var h=$(this);if(h.hasClass("use")){$(".voucher-box").show()}else{if(h.attr("data-facevalue")){if(f>=g){if(h.attr("checked")=="checked"){h.attr("checked",false);a.html("已选择<em>"+b+"</em>张抵用券，抵扣<em>"+f+"</em>元，不要再点了哦，再点就浪费了！")}else{b--;f-=Number(h.attr("data-facevalue"));if(b==0){a.html("请选择要使用的抵用券")}else{a.html("已选择<em>"+b+"</em>张抵用券，抵扣<em>"+f+"</em>元")}}}else{if(h.attr("checked")=="checked"){b++;f+=Number(h.attr("data-facevalue"));a.html("已选择<em>"+b+"</em>张抵用券，抵扣<em>"+f+"</em>元")}else{b--;f-=Number(h.attr("data-facevalue"));if(b==0){a.html("请选择要使用的抵用券")}else{a.html("已选择<em>"+b+"</em>张抵用券，抵扣<em>"+f+"</em>元")}}}c()}}});function c(){var h=g-f,i=h-e;if(h>0){if(i>0){h=e}else{i="0.00"}}else{h="0.00";i="0.00"}$("#balance-pay").text(h);$("#online-pay").text(i);if(i=="0.00"){}}});