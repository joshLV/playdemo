#{fixture delete:[models.admin.OperateUser.class,
    models.admin.OperateRole.class,
    models.order.OrderItems.class,
    models.order.Order.class,
    models.sales.Category.class,
    models.sales.Goods.class,
    models.sales.Brand.class,
    models.sales.Category.class,
    models.sales.Area.class,
    models.sales.Shop.class,
    models.order.ECoupon.class] ,
load:['fixture/roles.yml','fixture/supplierusers.yml',
'fixture/areas_unit.yml',
'fixture/categories_unit.yml',
'fixture/brands_unit.yml',
'fixture/shops_unit.yml',
'fixture/goods_unit.yml','fixture/orders.yml','fixture/orderItems.yml','fixture/ecoupon.yml'] /}

#{selenium "查看订单界面"}
%{
// 为平台帐户设置初始金额。
account = models.accounts.util.AccountUtil.getPlatformIncomingAccount()
account.amount = new java.math.BigDecimal("10000")
account.save()
}%
    #{include 'test/selenium/step/login.selenium' /}
    open('/orders')
    assertTitle('商品订单')
    *{verifyTextPresent('201202220324134991598')}*
    *{verifyTextPresent('201202220324134991599')}*
    verifyTextPresent('已付款')
    verifyTextPresent('发货')
    click('link=发货')
    waitForElementPresent('sendModal')
    type('id=order_deliveryCompany','汇通')
    type('id=order_deliveryNo','321123')
    *{clickAndWait('id=send')}*
    *{open('/orders')}*
    *{verifyTextPresent('已发货')}*
#{/selenium}
#{selenium '查看订单详细信息'}
    *{open('/orders/${play.test.Fixtures.idCache.get("models.order.Order-order1")}')}*
    *{assertTitle('订单详请')}*
    *{verifyTextPresent('201202220324134991598')}*
#{/selenium}
#{selenium '查看消费券号列表'}
    open('/coupons')
    assertTitle('券号列表')
    clickAndWait('link=消费券管理')
#{/selenium}

#{selenium '冻结券 - 解冻券'}
 #{include 'test/selenium/step/login.selenium' /}
    open('/coupons')
    verifyTitle('券号列表')
    *{clickAndWait('id=freeze_${play.test.Fixtures.idCache.get("models.order.ECoupon-coupon1")}')}*
    *{assertConfirmation('您确定要冻结******7001吗？')}*
    *{verifyTitle('券号列表')}*

    *{clickAndWait('id=unfreeze_${play.test.Fixtures.idCache.get("models.order.ECoupon-coupon1")}')}*
    *{verifyTitle('券号列表')}*

#{/selenium}
