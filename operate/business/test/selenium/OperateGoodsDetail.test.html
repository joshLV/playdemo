#{fixture delete:[
models.admin.SupplierUser.class,models.admin.SupplierRole.class,
models.sales.Category.class,
models.sales.Area.class,
models.sales.Goods.class,
models.sales.Brand.class],
load:['fixture/roles.yml','fixture/supplierusers.yml','fixture/areas.yml','fixture/base_data.yml','fixture/goods.yml'] /}


#{selenium '商品一览'}
    #{include 'test/selenium/step/login.selenium' /}
    open('/goods')
    assertTextPresent('商品一览')
    select('id=condition_status','label=不限')
    clickAndWait('id=isLottery')
    verifyTextPresent('测试商品3')
#{/selenium}

#{selenium '查看商品'}
    #{include 'test/selenium/step/login.selenium' /}
    open('/goods/${play.test.Fixtures.idCache.get("models.sales.Goods-Goods1")}')
    verifyTitle('查看商品')
    verifyTextPresent('测试商品1')
    verifyTextPresent('淘宝网')
#{/selenium}

#{selenium '修改商品'}
    #{include 'test/selenium/step/login.selenium' /}
    open('/goods/${play.test.Fixtures.idCache.get("models.sales.Goods-Goods2")}/edit')
    verifyTitle('修改商品')
    type('id=goods_no','002')
    type('id=goods_name','测试商品2')
    open('/goods?page=1')
#{/selenium}

#{selenium '复制商品'}
    #{include 'test/selenium/step/login.selenium' /}
    open('/goods/${play.test.Fixtures.idCache.get("models.sales.Goods-Goods2")}/copy')
    verifyTitle('复制商品')
    verifyValue('id=goods_no','')
    verifyValue('id=goods_name','测试商品2')
    verifyValue('id=goods_effectiveAt','')
    verifyValue('id=goods_expireAt','')
    verifyValue('id=goods_originalPrice','0')
    verifyValue('id=goods_salePrice','0')
    verifyValue('id=goods_baseSale','0')
#{/selenium}
