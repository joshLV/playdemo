#{fixture delete:[models.admin.OperateUser.class,models.admin.OperateRole.class,
models.sales.Brand.class,models.supplier.Supplier.class],
load:['fixture/roles.yml','fixture/supplierusers.yml','fixture/areas_unit.yml','fixture/shops.yml'] /}

#{selenium '添加门店'}
    #{include 'test/selenium/step/login.selenium' /}
open('/shops/new')
assertTextPresent('添加门店')
type('id=shop_name','Nike')
type('id=shop_address','test-address')
clickAndWait('id=save')
verifyTitle('门店一览')
verifyTextPresent('Nike')
verifyTextPresent('test-address')

#{/selenium}

#{selenium '修改门店'}
    #{include 'test/selenium/step/login.selenium' /}
open('/shops/${play.test.Fixtures.idCache.get("models.sales.Shop-shop1")}/edit')
verifyTitle('修改门店')
verifyValue('id=shop_name','一百券')
type('id=shop_name','一百券特色门店')
clickAndWait('id=save')
verifyTitle('门店一览')
verifyTextPresent('一百券特色门店')
#{/selenium}

#{selenium '删除门店'}
    #{include 'test/selenium/step/login.selenium' /}
open('/shops')
verifyTitle('门店一览')
verifyTextPresent('一百券二店')
verifyTextPresent('宛平南路二号')
clickAndWait('id=del_${play.test.Fixtures.idCache.get("models.sales.Shop-shop2")}')
assertConfirmation('您确定要删除一百券二店吗？')
verifyTitle('门店一览')
verifyTextNotPresent('一百券二店')
verifyTextNotPresent('宛平南路二号')
#{/selenium}