#{fixture delete:[models.accounts.WithdrawBill.class],
load:['fixture/withdraw_bill.yml', 'fixture/roles.yml','fixture/supplierusers.yml'] /}
%{
    id = play.test.Fixtures.idCache.get("models.accounts.WithdrawBill-bill_01");
    account = models.accounts.util.AccountUtil.getAccount(9999L, models.accounts.AccountType.CONSUMER)
    account.uncashAmount = new java.math.BigDecimal("10000")
    account.save()
    withdrawbill = models.accounts.WithdrawBill.findById(id)
    withdrawbill.account = account
    withdrawbill.save()
}%
#{selenium "审批提现测试"}
    #{include 'test/selenium/step/login.selenium' /}

    open('/withdraw')
    verifyTextPresent('待审批')
    clickAndWait('link=查看详情')
    click('link=通过')
    type('id=agree-fee','1')
    clickAndWait('css=button.btn.btn-primary')
    verifyTextPresent('成功')
    clickAndWait('link=查看详情')
    verifyTextPresent('成功')

#{/selenium}