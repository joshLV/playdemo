#{fixture delete:[models.admin.SupplierUser.class,models.admin.SupplierRole.class,
models.resale.Resaler.class],
load:['fixture/roles.yml','fixture/supplierusers.yml','fixture/topics.yml'] /}

#{selenium '公告一览'}
    #{include 'test/selenium/step/login.selenium' /}
open('/topics')
assertTextPresent('公告一览')
assertTextPresent('测试公告开始啦')
assertTextPresent('优惠啦平台')
assertTextPresent('2012-03-21')
assertTextPresent('2013-03-21')
assertTextPresent('100')
verifyTextPresent('通知')
#{/selenium}

#{selenium '修改公告'}
    #{include 'test/selenium/step/login.selenium' /}
open('/topics/${play.test.Fixtures.idCache.get("models.cms.Topic-Test")}/edit')
verifyTitle('修改公告')
verifyValue('id=topic_title','测试公告开始啦')
verifyValue('id=topic_displayOrder','100')
verifyValue('id=topic_effectiveAt','2012-03-21')
verifyValue('id=topic_expireAt','2013-03-21')
type('id=topic_title','已被修改的公告')
type('id=topic_displayOrder','300')
type('id=topic_content','已被修改的测试内容')
type('id=topic_effectiveAt','2012-05-20')
type('id=topic_expireAt','2013-05-20')
clickAndWait('id=save')
verifyTitle('公告一览')
verifyTextPresent('已被修改的公告')
verifyTextPresent('2012-05-20')
verifyTextPresent('2013-05-20')
verifyTextPresent('300')
verifyTextPresent('通知')
#{/selenium}
