#{fixture delete:[models.admin.OperateUser.class,models.admin.OperateRole.class,
models.cms.CmsQuestion.class],
load:['fixture/roles.yml','fixture/supplierusers.yml',
'fixture/user.yml','fixture/brands.yml','fixture/goods.yml','fixture/user_questions.yml'] /}

%{
id = play.test.Fixtures.idCache.get("models.consumer.User-user");
qid = play.test.Fixtures.idCache.get("models.cms.CmsQuestion-question1");
goodsId = play.test.Fixtures.idCache.get("models.sales.Goods-Goods1");
List<models.cms.CmsQuestion> list = models.cms.CmsQuestion.findAll();
for (models.cms.CmsQuestion q:list) {
q.userId=id;
q.goodsId=goodsId;
q.save();
}
}%
#{selenium '咨询管理'}
   #{include 'test/selenium/step/login.selenium' /}
open('/questions')
verifyTitle('咨询管理')
assertTextPresent('此款空调能把档风板往上打吗')
assertTextPresent('ssss')
assertTextPresent('ssss1')
assertTextPresent('guihi')
type('id=content', 's')
type('id=createdAtBegin', '2012-06-15')
type('id=createdAtEnd', '2012-06-15')
clickAndWait('id=searchbtn')
assertTextPresent('ssss')
assertTextPresent('ssss1')

#{/selenium}

#{selenium '回复'}
   #{include 'test/selenium/step/login.selenium' /}
    open('/questions/${qid}/edit')
    type('id=question_reply','asfasfa')
    clickAndWait('id=save')
    verifyTitle('咨询管理')
    assertTextPresent('asfasfa')
#{/selenium}

#{selenium '隐藏'}
  #{include 'test/selenium/step/login.selenium' /}
  open('/questions')
  clickAndWait('css=ul.nav.nav-list > li.active.activePath > a')
  clickAndWait('id=del_${qid}')
  assertConfirmation('您确定要删除吗？')
  verifyTextPresent('咨询管理')
  verifyTextNotPresent('此款空调能把档风板往上打吗')
#{/selenium}