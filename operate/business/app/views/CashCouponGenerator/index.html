#{extends 'layout_operate/layout.html' /}
#{include 'share/nav.html' /}
#{set title:'生成现金券' /}
<script src="@{'/public/javascripts/My97DatePicker/WdatePicker.js'}" type="text/javascript" charset="UTF-8"></script>
#{form @CashCouponGenerator.generate(), method:'POST', class:'form-horizontal' }
    <div class="control-group">
        <label class="control-label" for="inputName">券名称</label>
        <div class="controls">
            <input type="text" id="inputName" name="name">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputFaceValue">面值</label>
        <div class="controls">
            <input type="text" id="inputFaceValue" name="faceValue">
            <span class="help-inline">正整数</span>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputCount">数量</label>
        <div class="controls">
            <input type="text" id="inputCount" name="count">
            <span class="help-inline">1-9999</span>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputPrefix">卡号前缀</label>
        <div class="controls">
            <input type="text" id="inputPrefix" name="prefix">
            <span class="help-inline">纯英文和数字，3-10位,如 TEST20120925</span>
        </div>
    </div>
    <div class="control-group">
        <div class="controls">
            <button type="submit" class="btn btn-primary">勇敢的生成吧</button>
        </div>
    </div>
#{/form}
<table class="table table-hover">
    <tr>
        <th>券名称</th>
        <th>面值</th>
        <th>卡号</th>
        <th>卡密</th>
        <th>创建时间</th>
        <th>创建者</th>
        <th>状态</th>
    </tr>
    #{list coupons, as:'coupon'}
    <tr>
        <td>${coupon.name}</td>
        <td>${coupon.faceValue.formatCurrency("CNY")}</td>
        <td>${coupon.serialNo}</td>
        <td>${coupon.chargeCode}</td>
        <td>${coupon.createdAt.format()}</td>
        <td>${coupon.operatorName}</td>
        <td>
            #{if coupon.userId || coupon.chargedAt} <span class="label label-important">已消费</span> #{/if}
            #{else}<span class="label label-success">未消费</span>#{/else}
        </td>
    </tr>
    #{/list}
</table>
