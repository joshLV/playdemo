#{extends 'layout_operate/layout.html' /}
#{include 'share/nav.html' /}
#{set title:'券号操作历史列表' /}
<div class="body">
    <legend>${title}</legend>

    <table class="table table-striped table-bordered table-condensed">
        <thead>
        <tr>
            <th width="10px">订单号</th>
            <th width="10px">券号</th>
            <th width="8px">手机</th>
            <th width="90px">商品名称</th>
            <th width="30px">单价</th>
            <th width="30px">有效期</th>
            <th width="50px">付款时间</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><a href="@{OperateOrders.details(coupon?.order?.id)}">${coupon?.order?.orderNumber}</a></abbr></td>
            <td>  ${n}${coupon?.getMaskedEcouponSn()}</td>
            <td>${coupon?.orderItems?.phone}</td>
            <td>${coupon?.goods?.shortName}</td>
            <td>${coupon?.salePrice?.formatCurrency('CNY')}</td>
            <td>${coupon?.effectiveAt ?.format()} /
            ${coupon?.expireAt?.format()}</td>
            <td>${coupon?.order?.paidAt?.format("yyyy-MM-dd HH:mm:ss")}</td>
        </tr>
        </tbody>
    </table>


    <table class="table table-striped table-bordered table-condensed">
        <thead>
        <tr>
            <th width="80">创建日期</th>
            <th width="80">操作者</th>
            <th width="75">变更前状态</th>
            <th width="75">变更后状态</th>
            <th width="75">验证方式</th>
            <th width="80">操 作</th>
        </tr>
        </thead>

        <tbody>

        #{list items:couponList, as:'coupon'}
        <tr>
            <td>${coupon?.createdAt}</td>
            <td align="center">${coupon?.operator}</td>
            <td align="center"><span class="label label-info">&{'coupon.'+coupon?.fromStatus}</span></td>
            <td><span
                #{if coupon?.fromStatus == coupon?.toStatus }class="label label-info"#{/if}#{else}class="label label-warning"#{/else}>&{'coupon.'+
                coupon.toStatus}</span></td>
            <td>&{'coupon.'+coupon?.verifyType}</td>
            <td>${coupon?.remark?.raw()}</td>
        </tr>
        #{/list}
        </tbody>
    </table>
</div>