#{extends 'layout_operate/layout.html' /}
#{set title:'查看消费券' /}
#{include '/share/nav.html' /}
<div class="body">
    <form class="form-horizontal" name="frm" id="frm" method="post">
        <legend>查看消费券</legend>
        <div class="control-group">
            <label class="control-label">商品类型</label>

            <div class="controls">${goods?.categories?.name}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">品&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;牌</label>

            <div class="controls">${goods?.brand?.name}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">商品编号</label>

            <div class="controls">${goods?.no}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">商品名称</label>

            <div class="controls">${goods?.name}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">券有效期</label>

            <div class="controls">${goods?.effectiveAt?.format('yyyy-MM-dd HH:mm:ss')}
                至 ${goods?.expireAt?.format('yyyy-MM-dd HH:mm:ss')}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">原&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;价</label>

            <div class="controls">${goods?.faceValue?.formatCurrency('CNY')}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">进&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;价</label>

            <div class="controls">${goods?.originalPrice?.formatCurrency('CNY')}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">现&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;价</label>

            <div class="controls">${goods?.salePrice?.formatCurrency('CNY')}
            </div>
        </div>
    #{list items:goods.getLevelPrices(), as: 'level'}
        <div class="control-group">
            <label class="control-label">&{'goods.levelPrice.'+level?.level}</label>

            <div class="controls">${level.price?.formatCurrency('CNY')}
            </div>
        </div>
    #{/list}
        <div class="control-group">
            <label class="control-label">库&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;存</label>

            <div class="controls">${goods?.baseSale}件
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">商品图片</label>

            <div class="controls">
                <img src="${goods?.imageLargePath}"/>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">温馨提示</label>

            <div class="controls">${goods?.prompt?.raw()}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">商品详情</label>

            <div class="controls">${goods?.details?.raw()}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">使用门店</label>

            <div class="controls">
                <table class="table table-striped table-bordered table-condensed">
                ${goods?.isAllShop.yesno("全部门店","")}
                #{list items:shops, as:'shop' }
                    <tr>
                        <td><input type="checkbox" id="checkoption" value="${shop?.id}"/></td>
                        <td>${shop?.name}</td>
                        <td>${shop?.address}</td>
                        <td>${shop?.phone}</td>
                    </tr>
                #{/list}
                </table>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">商品状态</label>

            <div class="controls">&{'goods.'+goods.status}
            </div>
        </div>
        <div class="form-actions">
        #{if models.sales.GoodsStatus.APPLY.equals(goods.status)}
            #{vx.operateButton text:"同意上架",form:'frm',url:"/goods/"+goods.id+"/onSale",method:"PUT",
            class:"btn btn-primary" /}
            #{vx.operateButton text:"拒绝上架",form:'frm',url:"/goods/"+goods.id+"/reject",method:"PUT",
            class:"btn btn-primary" /}#{/if}
        #{if models.sales.GoodsStatus.ONSALE.equals(goods.status)}
            #{vx.operateLink text:"强制下架",form:'frm',url:"/goods/"+goods.id+"/reject",method:"PUT",
            class:"btn btn-primary" /}#{/if}
        #{if models.sales.GoodsStatus.REJECT.equals(goods.status)}
            #{vx.operateButton text:"同意上架",form:'frm',url:"/goods/"+goods.id+"/onSale",method:"PUT",
            class:"btn btn-primary" /}#{/if}
        #{if models.sales.GoodsStatus.OFFSALE.equals(goods.status)}
            #{vx.operateButton text:"同意上架",form:'frm',url:"/goods/"+goods.id+"/onSale",method:"PUT",
            class:"btn btn-primary" /}#{/if}
            #{vx.cancelButton url:'/goods', class:'btn btn-primary'/}
        </div>
    </form>
</div>
