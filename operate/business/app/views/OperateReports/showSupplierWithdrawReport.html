#{extends 'layout_operate/layout.html' /}
#{set title:'商户提现汇总' /}
#{include '/share/nav.html' /}

#{set 'moreScripts'}
<script src="@{'/public/javascripts/My97DatePicker/WdatePicker.js'}" type="text/javascript" charset="UTF-8"></script>
#{/set}

#{set 'moreStyles'}
<style type="text/css">
    .form-inline ul {
        display: inline-block;
        margin-bottom: -15px;
    }

    .nav-tabs {
        margin-bottom: 0px;
    }

    .tab-content {
        border-left: 1px solid #DDD;
        border-right: 1px solid #DDD;
        border-bottom: 1px solid #DDD;
        clear: both;
    }

    .tab-content .binary {
        width: 40%;
        float: left;
        text-align: center;
        margin: 5px 1%;
    }

    .seq {
        margin-top: 20px;
    }

    .alert {
        margin-bottom: 0px;
    }

    .seq thead tr :first {
        background-color: #f5f5f5;
    }

    footer {
        margin-top: 20px;
    }
</style>
#{/set}

<div class="body">
    <form class="well form-inline" action="@{OperateReports.showSupplierWithdrawReport()}" method="GET" id="form">
        商户
    #{vx.selectInputField name:"supplierName", id:"condition.accountUid", list:supplierList, value: condition?.accountUid/}
        起止日期
        <input type="text" id="condition_begin" class="input-medium Wdate" name="condition.createdAtBegin"
               onfocus="WdatePicker({readOnly:true})" value="${condition?.createdAtBegin?.format()}"> -
        <input type="text" id="condition_end" class="input-medium Wdate" name="condition.createdAtEnd"
               onfocus="WdatePicker({readOnly:true})" value="${condition?.createdAtEnd?.format()}">
        <button type="submit" class="btn btn-primary">搜索</button>

    </form>
    <div class="tab-content">
        <table class="table table-striped table-bordered table-condensed">
            <tr>
                <th width="8%">序号</th>
                <th width="6%">商户名称</th>
                <th width="5%" style="text-align: right;">期初未提现金额</th>
                <th width="15%" style="text-align: right;">本周期券消费金额</th>
                <th width="10%" style="text-align: right;">本周期提现金额</th>
                <th width="5%" style="text-align: right;">剩余未提现金额</th>
            </tr>
        #{paginate.list items:supplierWithdrawReportPage, as:'supplierWithdraw'}
            <tr>
                #{set i:1/}
                <td>${i}</td>
            *{${accountSequence.createdAt.format('yyyy-MM-dd HH:mm:ss')}}*
                <td>${supplierWithdraw?.supplier?.otherName} </td>
                <td style="text-align: right;">${supplierWithdraw?.previousUnwithdrawnAmount}</td>
                <td style="text-align: right;">${supplierWithdraw?.consumedAmount}</td>
                <td style="text-align: right;">
                ${supplierWithdraw?.withdrawnAmount}
                </td>
                <td style="text-align: right;"></td>
            </tr>
            #{set i++/}
        #{/paginate.list}
        </table>
    </div>
    <div class="pagination">
        <ul>
        #{paginate.controls items:supplierWithdrawReportPage /}
        </ul>
    </div>

</div>