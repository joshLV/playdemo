#{fixture delete:[models.admin.OperateUser.class,models.admin.OperateRole.class,
models.cms.Block.class],
load:['fixture/roles.yml','fixture/users.yml','fixture/blocks.yml'] /}

#{selenium '内容块一览'}
    #{include 'test/selenium/step/login.selenium' /}
open('/blocks')
verifyTitle('内容块一览')
assertTextPresent('测试内容块开始啦')
assertTextPresent('2012-03-21')
assertTextPresent('2013-03-21')
assertTextPresent('100')
#{/selenium}

#{selenium '修改内容块'}
    #{include 'test/selenium/step/login.selenium' /}
open('/blocks/${play.test.Fixtures.idCache.get("models.cms.Block-Test")}/edit')
verifyTitle('修改内容块')
verifyValue('id=block_title','测试内容块开始啦')
verifyValue('id=block_displayOrder','100')
verifyValue('id=block_effectiveAt','2012-03-21')
verifyValue('id=block_expireAt','2013-03-21')
type('id=block_title','已被修改的内容块')
type('id=block_link','http://www.google.com')
type('id=block_displayOrder','300')
type('id=block_content','已被修改的测试内容')
type('id=block_effectiveAt','2012-05-20')
type('id=block_expireAt','2013-05-20')
clickAndWait('id=save')
verifyTitle('内容块一览')
verifyTextPresent('已被修改的内容块')
verifyTextPresent('2012-05-20')
verifyTextPresent('2013-05-20')
verifyTextPresent('300')
#{/selenium}

#{selenium '删除内容块'}
    #{include 'test/selenium/step/login.selenium' /}
open('/blocks')
verifyTitle('内容块一览')
click('id=del_${play.test.Fixtures.idCache.get("models.cms.Block-Test")}')
assertConfirmation('您确定要删除测试内容块开始啦吗？')
verifyTitle('内容块一览')
#{/selenium}

