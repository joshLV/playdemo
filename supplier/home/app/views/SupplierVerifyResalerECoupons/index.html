#{extends 'layout_trader/layout2.html' /}
#{include 'Share/nav.html' /}
#{set title:'券验证' /}
#{set menu:"verify" /}
#{set 'moreStyles'}
    #{asset.css src:['/m/verify.css'] /}
#{/set}
<style>
    a.btn {
        width: 88px;
    }
</style>
#{set 'moreScripts'}
<script src="@{'/public/javascripts/meituan-verify.js'}" type="text/javascript" charset="UTF-8"></script>
#{/set}
<div class="bd batch-verify">
    <h2>券验证</h2>

    <form id="coupon-form" action="@{SupplierVerifyECoupons.verify()}" method="post">

        <div class="field-sect">
            <div class="field-group">
                <label>一百券分店</label>
            #{if shop == null}
                #{select 'shopId', id:"shopId", value:shopId}
                    #{list items:shopList, as:'shop'}
                        #{option shop?.id}${shop?.name}#{/option}
                    #{/list}
                #{/select}
            #{/if}
            #{else}
                <p>${shop?.name}</p>
                <input type="hidden" name="shopId" id="shopId" value="${shop?.id}"/>
            #{/else}
            </div>

            <div class="field-group">
                <label>美团分店</label>
            ${resalerShopList?.get(0)?.resalerPartnerShopName}
            *{#{select 'partnerShopId', id:"partnerShopId", value:partnerShopId}}*
            *{#{list items:resalerShopList, as:'shop'}}*
            *{#{option shop?.resalerPartnerShopId}${shop?.resalerPartnerShopName}#{/option}}*
            *{#{/list}}*
            *{#{/select}}*
            </div>
            <input type="hidden" name="partnerShopId" id="partnerShopId"
                   value="${resalerShopList?.get(0)?.resalerPartnerShopId}"/>
            <input type="hidden" name="partnerGoodsId" id="partnerGoodsId"
                   value="${resalerProductList?.get(0)?.partnerGoodsId}"/>
            <input type="hidden" name="goodsId" id="goodsId" value="${resalerProductList?.get(0)?.goods?.id}"/>
        *{<div class="field-group">}*
        *{<label>美团项目</label>}*
        *{#{select 'partnerGoodsId', id:"partnerGoodsId", value:partnerGoodsId}}*
        *{#{option ''}--请选择--#{/option}}*
        *{#{list items:resalerProductList, as:'resalerGoods'}}*
        *{#{option resalerGoods?.partnerGoodsId}${resalerGoods?.partnerGoodsName}#{/option}}*
        *{#{/list}}*
        *{#{/select}}*
        *{</div>}*
            <h2>输入券号<span style="display: inline;color: grey">(验证时请确认输入的券号全部为10位或12位)</span></h2>


            <div class="field-group">
            *{<label class="coupon-label" for="enter-coupon">输入券号</label>}*
            #{list items:0..4, as:'index'}
                <input type="text" size="32" maxlength="14" name="coupon" id="enter-coupon" coupon-index="${index}"
                       class="enter-coupon" type="text" placeholder="请输入序列号" style="margin-bottom: 5px" />
                <span id="verify-info-${index}" style="color: red;display: block"></span>
            #{/list}
                <a id="verify-btn" class="btn batch-verify" href="javascript:void(0);"
                   hidefocus="true">验证消费</a>
                <span id="verify-msg" style="color: red;display: block"></span>
            </div>
        </div>
    </form>

</div>
