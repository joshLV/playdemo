#{extends 'main.html' /} #{set title:'优惠啦 - 注册新用户' /} #{set 'moreStyles'}
<link href="@{'/public/stylesheets/default.css'}" rel="stylesheet" type="text/css" />
#{/set}
<script type="text/javascript">
	//忘记登录密码 修改密码
	function updatePass() {
		var loginName = $.trim($("#loginName").val());
		var password = $("#password").val();
		var confirmPassword = $("#confirmPassword").val();
		var mobile = $("#mobile").val();
		if (password == "") {
            $("#checkupuserpass1").html("<font color=red>请输入密码！</font>");
            return false;
        }
		if (password != ''&& password.length < 6) {
			$("#checkupuserpass1").html("<font color=red>密码至少6位！</font>");
            return false;
		} else {
			$("#checkupuserpass1").html("");
		}
		
		if (password != confirmPassword) {
			$("#checkupuserpass2").html("<font color=red>两次密码不一致</font>");
			return false;
		}
		
		$.post("/updatePassword", {
			email : loginName,
			password : password,
			confirmPassword : confirmPassword,
			mobile : mobile,
		}, function(data) {
			if (data == 1) {
				alert('修改成功');
				window.location.href = "/login";
			} else{
				alert('修改失败');
			}
		}, "text");
	}
</script>
<!--主体内容部分-->
<div id="index_main">
    <div class="fpwd_1">
        <b></b><span>密码找回</span>
    </div>

    <div class="fpwd_2 redInfo">
        <div class="fpwd_3 redInfo">
            <b></b> <span>设置新的登录密码<br />您申请了修改密码，为保护您的账号安全，您的当前登录密码系统随机重置，请立即修改为您常用的新密码。
            </span>
        </div>
        <ul class="fpwd_4">
            <li><label>请输入新的密码：</label><input type="password" id="password" name="user.password" class="greyinput" maxlength="20" /><span id="checkupuserpass1"> </span></li>
            <li><span>登录优惠啦的密码， 6-20个数字，请使用单独数字组成的密码<br />不能使用字母或者其他字符。
            </span></li>
            <li><label>再次输入新密码：</label><input type="password" id="confirmPassword"  name="user.confirmPassword" class="greyinput"
                maxlength="20"/><span id="checkupuserpass2"> </span>
    </li>
    <li class="fpwd_4_0"><input id="mobile" name="user.mobile" type="hidden" value="${mobile}"> <input id="loginName" name ="loginName"
        type="hidden" value="${email}"> <input onClick="updatePass()" type="button" value="确 定" /></li>
    </ul>
</div>
</div>
