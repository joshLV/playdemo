#{extends 'main.html' /}
#{set title:'优惠啦 - 首页' /}

#{set 'moreScripts'}
<SCRIPT type=text/javascript>
    var $ = function (id) {
        return "string" == typeof id ? document.getElementById(id) : id;
    };

    var Extend = function (destination, source) {
        for (var property in source) {
            destination[property] = source[property];
        }
        return destination;
    }

    var CurrentStyle = function (element) {
        return element.currentStyle || document.defaultView.getComputedStyle(element, null);
    }

    var Bind = function (object, fun) {
        var args = Array.prototype.slice.call(arguments).slice(2);
        return function () {
            return fun.apply(object, args.concat(Array.prototype.slice.call(arguments)));
        }
    }

    var Tween = {
        Quart:{
            easeOut:function (t, b, c, d) {
                return -c * ((t = t / d - 1) * t * t * t - 1) + b;
            }
        },
        Back:{
            easeOut:function (t, b, c, d, s) {
                if (s == undefined) s = 1.70158;
                return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
            }
        },
        Bounce:{
            easeOut:function (t, b, c, d) {
                if ((t /= d) < (1 / 2.75)) {
                    return c * (7.5625 * t * t) + b;
                } else if (t < (2 / 2.75)) {
                    return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
                } else if (t < (2.5 / 2.75)) {
                    return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
                } else {
                    return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
                }
            }
        }
    }


    //容器对象,滑动对象,切换数量
    var SlideTrans = function (container, slider, count, options) {
        this._slider = $(slider);
        this._container = $(container);//容器对象
        this._timer = null;//定时器
        this._count = Math.abs(count);//切换数量
        this._target = 0;//目标值
        this._t = this._b = this._c = 0;//tween参数

        this.Index = 0;//当前索引

        this.SetOptions(options);

        this.Auto = !!this.options.Auto;
        this.Duration = Math.abs(this.options.Duration);
        this.Time = Math.abs(this.options.Time);
        this.Pause = Math.abs(this.options.Pause);
        this.Tween = this.options.Tween;
        this.onStart = this.options.onStart;
        this.onFinish = this.options.onFinish;

        var bVertical = !!this.options.Vertical;
        this._css = bVertical ? "top" : "left";//方向

        //样式设置
        var p = CurrentStyle(this._container).position;
        p == "relative" || p == "absolute" || (this._container.style.position = "relative");
        this._container.style.overflow = "hidden";
        this._slider.style.position = "absolute";

        this.Change = this.options.Change ? this.options.Change :
                this._slider[bVertical ? "offsetHeight" : "offsetWidth"] / this._count;
    };
    SlideTrans.prototype = {
        //设置默认属性
        SetOptions:function (options) {
            this.options = {//默认值
                Vertical:true, //是否垂直方向（方向不能改）
                Auto:true, //是否自动
                Change:0, //改变量
                Duration:50, //滑动持续时间
                Time:10, //滑动延时
                Pause:4000, //停顿时间(Auto为true时有效)
                onStart:function () {
                }, //开始转换时执行
                onFinish:function () {
                }, //完成转换时执行
                Tween:Tween.Quart.easeOut//tween算子
            };
            Extend(this.options, options || {});
        },
        //开始切换
        Run:function (index) {
            //修正index
            index == undefined && (index = this.Index);
            index < 0 && (index = this._count - 1) || index >= this._count && (index = 0);
            //设置参数
            this._target = -Math.abs(this.Change) * (this.Index = index);
            this._t = 0;
            this._b = parseInt(CurrentStyle(this._slider)[this.options.Vertical ? "top" : "left"]);
            this._c = this._target - this._b;

            this.onStart();
            this.Move();
        },
        //移动
        Move:function () {
            clearTimeout(this._timer);
            //未到达目标继续移动否则进行下一次滑动
            if (this._c && this._t < this.Duration) {
                this.MoveTo(Math.round(this.Tween(this._t++, this._b, this._c, this.Duration)));
                this._timer = setTimeout(Bind(this, this.Move), this.Time);
            } else {
                this.MoveTo(this._target);
                this.Auto && (this._timer = setTimeout(Bind(this, this.Next), this.Pause));
            }
        },
        //移动到
        MoveTo:function (i) {
            this._slider.style[this._css] = i + "px";
        },
        //下一个
        Next:function () {
            this.Run(++this.Index);
        },
        //上一个
        Previous:function () {
            this.Run(--this.Index);
        },
        //停止
        Stop:function () {
            clearTimeout(this._timer);
            this.MoveTo(this._target);
        }
    };
</SCRIPT>
#{/set}

<div id="wrap_main">
<div id="wrap_top">
    #{topNavigator/}
    <div id="wrap_top_header" style="margin: 0px">
        <div id="wrap_top_header_left"><img src="@@{'/public/images/logo.jpg'}"/></div>
        <div id="wrap_top_header_mid">
            <ul class="tab_header">
                <li><a class="tab_hover" onClick="selectTag('tagContent0',this)" href="javascript:void(0)">首页</a></li>
                <li><a class="tab_nohover" onClick="selectTag('tagContent0',this)" href="javascript:void(0)">劵商城</a>
                </li>
                <li><a class="tab_nohover" onClick="selectTag('tagContent0',this)" href="javascript:void(0)">优惠劵</a>
                </li>
                <li><a class="tab_nohover" onClick="selectTag('tagContent0',this)" href="javascript:void(0)">优惠团购</a>
                </li>
                <li><a class="tab_nohover" onClick="selectTag('tagContent0',this)" href="javascript:void(0)">积分乐园</a>
                </li>
                <li><a class="tab_nohover" onClick="selectTag('tagContent0',this)" href="javascript:void(0)">优惠终端</a>
                </li>
                <li><a class="tab_nohover" onClick="selectTag('tagContent0',this)" href="javascript:void(0)">电影票</a>
                </li>
            </ul>
        </div>
        <div id="wrap_top_right"><img src="@@{'/public/images/right_tel.jpg'}"/></div>
    </div>
    <div style="clear:both"></div>
    <div id="research_wrap">
        <div id="research_box">
            <form action="" method="get">
                <input class="left_input_seach" type="text" value="请输入您想找的优惠劵"/>
                <input class="left_input_seach2" type="image" name="imageField" id="imageField"
                       src="@@{'/public/images/sumbit_yuhui.jpg'}"/>
            </form>
        </div>
        <!--tag 标签-->
        <div class="tag_box"><strong>热门搜素：</strong><span class="tag_hot"><a href="#" class="font_white">真功夫</a>&nbsp;&nbsp;&nbsp;<a
                href="#" class="font_white">爱西西里</a>&nbsp;&nbsp;&nbsp;<a href="#" class="font_white">西提牛排</a>&nbsp;&nbsp;&nbsp;<a
                href="#" class="font_white">西提牛排</a>&nbsp;&nbsp;&nbsp;<a href="#" class="font_white">西提牛排</a>&nbsp;&nbsp;&nbsp;<a
                href="#" class="font_white">西提牛排</a>&nbsp;&nbsp;&nbsp;<a href="#" class="font_white">西提牛排</a></span>
        </div>
        <!--购物车结算-->
        <div class="seach_right">
            <span class="seach_right_sp"><img class="gouwu_icon" src="@@{'/public/images/gouwu_icon.jpg'}"/></span>
            <span class="gouwu_font">购物车：<span class="font_red">12件</span></span>
            <span class="gouwu_jiesuan"><a href="#" class="font_white">去结算</a></span>
        </div>
        <!--下拉购物车-->
        <div class="abs_gouwu_car" style="display:none">
            <!--over auto-->
            <div class="over_auto">
                <div class="car_box">
                    <div class="car_one"><img src="@@{'/public/images/chanpin/car_cp1.jpg'}" width="60" height="41"/>
                    </div>
                    <div class="car_one_right">
                        <div class="float_title">马可波罗 一千零一夜花茶20g</div>
                        <div class="font_red">Y:12.9<span class="font_gray">x1</span></div>
                        <div class="font_gray delete_font"><a href="#">删除</a></div>
                    </div>
                </div>

                <div class="car_box">
                    <div class="car_one"><img src="@@{'/public/images/chanpin/car_cp1.jpg'}"/></div>
                    <div class="car_one_right">
                        <div class="float_title">佳宝 无花果35G</div>
                        <div class="font_red">Y:3元<span class="font_gray">x3</span></div>
                        <div class="font_gray delete_font"><a href="#">删除</a></div>
                    </div>
                </div>
                <div class="car_box">
                    <div class="car_one"><img src="@@{'/public/images/chanpin/car_cp1.jpg'}"/></div>
                    <div class="car_one_right">
                        <div class="float_title">超值试用装 修护眼膜贴2对+便携装小</div>
                        <div class="font_red">Y:0.01<span class="font_gray">x1</span></div>
                        <div class="font_gray delete_font"><a href="#">删除</a></div>
                    </div>
                </div>
                <div class="car_box">
                    <div class="car_one"><img src="@@{'/public/images/chanpin/car_cp1.jpg'}"/></div>
                    <div class="car_one_right">
                        <div class="float_title">和田 一品玉枣（四星）500克/袋</div>
                        <div class="font_red">Y:35<span class="font_gray">x1</span></div>
                        <div class="font_gray delete_font"><a href="#">删除</a></div>
                    </div>
                </div>
            </div>

            <div class="gouwu_car_haha">共<span class="font_red">6</span>件商品</div>
            <div class="gouwu_car_haha">金额总计（预估）：<span class="font_red">59.61元</span></div>
            <div class="gouwu_car_haha bottom_car"><a href="#"><img src="@@{'/public/images/go_gouwu_car.jpg'}"/></a>
            </div>
        </div>
    </div>
</div>

<!--主体内容部分-->
<div id="wrap_content">
    <!--左侧部分-->
    <div id="left_content_wrap">
        <div id="left_content_top1">
            <DIV id=idContainer2 class=container>
                <TABLE id=idSlider2 border=0 cellSpacing=0 cellPadding=0>
                    <TBODY>
                    <TR>
                        <TD class=td_f><A href="#" target="_blank"><IMG src="@@{'/public/images/flash/01.jpg'}"></A>
                        </TD>
                        <TD class=td_f><A href="#" target="_blank"><IMG src="@@{'/public/images/flash/02.jpg'}"></A>
                        </TD>
                        <TD class=td_f><A href="#" target="_blank"><IMG src="@@{'/public/images/flash/03.jpg'}"></A>
                        </TD>
                        <TD class=td_f><A href="#" target="_blank"><IMG src="@@{'/public/images/flash/04.jpg'}"></A>
                        </TD>
                        <TD class=td_f><A href="#" target="_blank"><IMG src="@@{'/public/images/flash/05.jpg'}"></A>
                        </TD>
                    </TR>
                    </TBODY>
                </TABLE>
                <UL id=idNum class=num></UL>
            </DIV>
            <SCRIPT>
                var forEach = function (array, callback, thisObject) {
                    if (array.forEach) {
                        array.forEach(callback, thisObject);
                    } else {
                        for (var i = 0, len = array.length; i < len; i++) {
                            callback.call(thisObject, array[i], i, array);
                        }
                    }
                }

                var st = new SlideTrans("idContainer2", "idSlider2", 5, { Vertical:false });

                var nums = [];
                //插入数字
                for (var i = 0, n = st._count - 1; i <= n;) {
                    (nums[i] = $("idNum").appendChild(document.createElement("li"))).innerHTML = ++i;
                }

                forEach(nums, function (o, i) {
                    o.onmouseover = function () {
                        o.className = "on";
                        st.Auto = false;
                        st.Run(i);
                    }
                    o.onmouseout = function () {
                        o.className = "";
                        st.Auto = true;
                        st.Run();
                    }
                })

                //设置按钮样式
                st.onStart = function () {
                    forEach(nums, function (o, i) {
                        o.className = st.Index == i ? "on" : "";
                    })
                }
                st.Run();
            </SCRIPT>
        </div>

        <div id="left_content_top2">
            <div class="hot_sq">热门商圈：</div>
            <div class="area_name">
                <ul class="area_ul">
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <li><a href="#">地区名称</a></li>
                    <span class="three_ie6"><a href="#" class="font_hei">全部商圈</a></span>
                </ul>
            </div>
        </div>
        <div id="left_content_top3">
            <div>
                <ul class="hot_shangpin">
                    <li class="hot_shangpin_li"><a class="tab2_a" href="#">热门</a></li>
                    <li class="hot_shangpin_li"><a class="current_tab2" href="#">美食</a></li>
                    <li class="hot_sp_r"><a href="#">更多>></a></li>
                </ul>
            </div>


            <!--具体商品价格-->
            <div id="" class="shop_wrap">
                <ul>
                #{set i:-1} #{/set}
                #{list goodsList, as:'one_goods'}
                    #{if (++i%4) == 0 }
                    <div class="shop_li_box">
                    #{/if}
                    <li class="shop_box">
                        <div><a href="/goods/${one_goods.id}"><img src="${one_goods.image_middle_path}"/></a></div>
                        <div class="margin_top5px"><span
                                class="strong_gray font_14px">${one_goods.name} </span><span
                                class="pri_jiage font_14px">Y${one_goods.sale_price}</span></div>
                        <div class="text_decorat">市场价格：Y:${one_goods.original_price}</div>
                    </li>
                    #{if ((i%4 == 3))}
                    </div>
                    #{/if}

                #{/list}


                </ul>
            </div>
        </div>
    </div>
    <!--右侧部分-->
    <div id="right_content_wrap">
        <div id="right_content_top1" class="ones border_div">
            <dl>
                <dt class="right_one_dt">公&nbsp;告</dt>
                <dd class="right_one_dd"><span>10-08-5</span><a href="#">优惠啦改版啦优惠啦改版啦！</a></dd>
                <dd class="right_one_dd right_one_dd2"><span>10-08-5</span><a href="#">优惠啦改版啦优惠啦改版啦！</a></dd>
                <dd class="right_one_dd"><span>10-08-5</span><a href="#">优惠啦改版啦优惠啦改版啦！</a></dd>
                <dd class="right_one_dd right_one_dd2"><span>10-08-5</span><a href="#">优惠啦改版啦优惠啦改版啦！</a></dd>
                <dd class="right_one_dd"><span>10-08-5</span><a href="#">优惠啦改版啦优惠啦改版啦！</a></dd>
            </dl>
        </div>
        <div id="right_content_top2" class="ones border_div">
            <dl class="right_top2">
                <dt><span><a href="#">更多>></a></span>优惠团购</dt>
                <dd class="right_top2_dd1"><img src="@@{'/public/images/adv/1.jpg'}"/></dd>
                <dd class="right_top2_dd2">
                    <div>还有<span class="span_font_red">0</span>天<span class="span_font_red">6</span>小时<span
                            class="span_font_red">6</span>分<span class="span_font_red">35</span>秒结束
                    </div>
                </dd>
                <dd class="right_top2_dd3">
                    <div><span>[优惠团]</span><b class="strong_gray">仅35元！原价67元的</b></div>
                </dd>
                <dd class="right_top2_dd4">
                    <div class="right_dd4_div2"><span class="strong_font font_size14px">团购价：</span><span
                            class="font_14px font_red_one font_weight">156</span>元<span class="right_dd4_span"><a
                            class="li_goumai_bg" href="#">立即购买</a></span>
                    </div>
                    <div class="right_dd4_div">
                        原价：234元<span class="ones_ie6"><span>52</span>人已经购买</span>
                    </div>
                </dd>
            </dl>

        </div>
        <div id="right_content_top3" class="ones border_div">
            <dl>
                <dt class="right_list_dt"><span><a href="#">更多>></a></span>热门优惠劵</dt>
                <dd class="right_lists right_list2"><a href="#">【牛奶棚】[牛奶棚]大社区开心...</a></dd>
                <dd class="right_lists"><a href="#">【河河亭铁板烧】[河河亭铁板烧]</a></dd>
                <dd class="right_lists right_list2"><a href="#">【牛奶棚】[牛奶棚]大社区开心..</a></dd>
                <dd class="right_lists"><a href="#">【维罗纳意式私房菜】[牛奶棚]</a></dd>
                <dd class="right_lists right_list2"><a href="#">【牛奶棚】[牛奶棚]大社区开心..</a></dd>
                <dd class="right_lists"><a href="#">【牛奶棚】[牛奶棚]大社区开心..</a></dd>
                <dd class="right_dd_adv"><a href="#"><img src="@@{'/public/images/adv/2.jpg'}"/></a></dd>
            </dl>
        </div>
    </div>
</div>
</div>