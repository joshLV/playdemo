#{fixture delete:'all'/}
%{
long time = System.currentTimeMillis();
}%
#{selenium 'Test Register/index.html'}
    open('/register')
    verifyTitle('优惠啦 - 注册新用户')
    type('id=loginName','admin${time}@uhuila.com')
    type('id=password','123456')
    type('id=confirmPassword','123456')
    type('id=captcha','zuet')
    clickAndWait('id=register_submit')
    verifyTextPresent('注册成功页面')
    
    openAndWait('/@cas/login?service=/authenticate&gateway=true')
    assertTitle('CAS Mock Server - Login')
    type('id=login','admin${time}@uhuila.com')
    type('id=password','admin${time}@uhuila.com')
    clickAndWait('css=input[type="submit"]')
    assertNotTitle('CAS Mock Server - Login')
        
    verifyTitle('优惠啦 - 首页')
    verifyText('id=login_name','admin${time}@uhuila.com')
    assertElementPresent('css=body')
#{/selenium}