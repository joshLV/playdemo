#{factory delete:'all'/}
%{
long time = System.currentTimeMillis();
}%
#{selenium 'Test Register/index.html'}
    open('/register')
    verifyTitle('新用户注册')
    type('id=loginName','admin${time}@uhuila.com')
    type('id=password','123456')
    type('id=confirmPassword','123456')
    type('id=captcha','zuet')
    clickAndWait('id=register_submit')
    verifyTitle('注册成功')

    openAndWait('/@cas/login?service=/authenticate&gateway=true')
    assertTitle('CAS Mock Server - Login')
    type('id=login','admin${time}@uhuila.com')
    type('id=password','admin${time}@uhuila.com')
    clickAndWait('css=input[type="submit"]')
    assertNotTitle('CAS Mock Server - Login')

    *{verifyTitle('首页')}*
    *{verifyText('id=login_name','admin${time}@uhuila.com')}*
    *{assertElementPresent('css=body')}*
#{/selenium}
