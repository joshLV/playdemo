#{fixture delete:'all', load:'fixture/carts.yml' /}
#{selenium 'Test Carts/index.html'}
%{
    goodsA = play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")
    goodsB = play.test.Fixtures.idCache.get("models.sales.Goods-Goods_2")
}%
openAndWait('/goods/${goodsA}')
assertText('id=carts_size','0')
click('id=link_add_cart')
waitForElementPresent('id=add_cart_result')
openAndWait('/goods/${goodsB}')
assertText('id=carts_size','1')
click('id=link_add_cart')
waitForElementPresent('id=add_cart_result')
openAndWait('/carts')
assertText('id=carts_size','2')
verifyValue('id=num_${goodsB}','1')
verifyValue('id=num_${goodsA}','1')
click('id=add_img_${goodsA}')
waitForValue('id=num_${goodsA}','2')
click('id=sub_img_${goodsA}')
waitForValue('id=num_${goodsA}','1')
click('id=sub_img_${goodsA}')
waitForValue('id=num_${goodsA}','1')
click('id=del_row_${goodsA}')
waitForElementNotPresent('id=del_row_${goodsA}')
verifyText('id=total_num','1')
#{/selenium}
