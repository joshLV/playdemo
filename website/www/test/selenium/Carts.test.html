#{fixture delete:'all', load:'fixture/carts.yml' /}
#{selenium 'Test Carts/index.html'}
openAndWait('/goods/${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}')
assertText('id=carts_size','0')
click('id=link_add_cart')
waitForElementPresent('id=add_cart_result')
openAndWait('/goods/${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_2")}')
assertText('id=carts_size','1')
click('id=link_add_cart')
waitForElementPresent('id=add_cart_result')
openAndWait('/carts')
assertText('id=carts_size','2')
verifyValue('id=num_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_2")}','1')
verifyValue('id=num_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}','1')
click('id=add_img_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}')
waitForValue('id=num_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}','2')
click('id=sub_img_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}')
waitForValue('id=num_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}','1')
click('id=sub_img_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}')
waitForValue('id=num_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}','1')
click('id=del_row_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}')
waitForElementNotPresent('id=del_row_${play.test.Fixtures.idCache.get("models.sales.Goods-Goods_1")}')
verifyText('id=total_num','1')
#{/selenium}
