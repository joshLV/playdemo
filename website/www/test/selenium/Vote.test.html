#{fixture delete:'all',load:['fixture/user.yml','fixture/votes.yml'] /}

%{
models.consumer.UserVote.deleteAll();
id = play.test.Fixtures.idCache.get("models.cms.VoteQuestion-vote2");
models.cms.VoteQuestion vote = models.cms.VoteQuestion.findById(id);
vote.expireAt = new Date();
vote.effectiveAt = new Date();
vote.save();
}%
#{selenium '一百券 - 有奖问答'}
    #{include 'test/selenium/step/login.selenium' /}
open('/votes')
verifyTitle('一百券 - 有奖问答')
assertTextPresent('优惠啦网站改版了，改成什么名字？')

open('/votes/view')
verifyTitle('参与成功页面')
assertTextPresent('D.一百券')

open('/votes')
click('id=answer_${id}')
*{clickAndWait('id=bt_submit')}*
*{verifyTitle('参与成功页面')}*

#{/selenium}



