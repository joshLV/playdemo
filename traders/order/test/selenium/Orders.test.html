#{fixture delete:[
    models.admin.SupplierUser.class,models.admin.SupplierRole.class,
    models.supplier.Supplier.class,
    models.order.Order.class,
    models.sales.Category.class,models.sales.Area.class,
    models.sales.Shop.class, models.sales.Goods.class,
    models.order.OrderItems.class,models.order.ECoupon.class,] ,
load:['fixture/roles.yml','fixture/supplier_users.yml',
    'fixture/goods_base.yml','fixture/goods.yml','fixture/user.yml','fixture/orders.yml','fixture/orderItems.yml'] /}
#{selenium "查看订单界面"}
    #{include 'test/selenium/step/login.selenium' /}
    open('/orders')
    assertTitle('商品订单')
#{/selenium}
%{

id = play.test.Fixtures.idCache.get("models.admin.SupplierUser-user3");
user = models.admin.SupplierUser.findById(id);

id = play.test.Fixtures.idCache.get("models.order.Order-order1");
order = models.order.Order.findById(id);
for(orderItem in order.orderItems){
    orderItem.goods.supplierId = user.supplier.id + 1L
    orderItem.goods.save()
        System.out.println(orderItem.goods.supplierId)
}
order.save()
}%
#{selenium '查看订单详细信息-无权限'}
    open('/orders/${order.orderNumber}')
    assertTitle('Application error')
#{/selenium}


#{selenium '查看消费券号列表'}
    open('/coupons')
    assertTitle('券列表')
#{/selenium}
