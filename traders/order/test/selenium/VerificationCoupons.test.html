#{fixture delete:[models.admin.SupplierUser.class,models.admin.SupplierRole.class,
    models.supplier.Supplier.class, 
    models.order.Order.class,models.sales.Category.class,models.sales.Area.class,
    models.sales.Shop.class, models.sales.Goods.class,
    models.order.OrderItems.class,models.order.ECoupon.class] ,
 load:['fixture/roles.yml','fixture/supplier_users.yml',
      'fixture/goods_base.yml','fixture/goods.yml','fixture/user.yml','fixture/orders.yml'] /}
      
#{selenium "商户验证消费券界面"}
    #{include 'test/selenium/step/login.selenium' /}
    open('/coupons/verify')
    clickAndWait('link=验证券')
    assertTitle('商户验证消费券')
#{/selenium}

#{selenium "验证券号是否消费"}
    #{include 'test/selenium/step/login.selenium' /}
    open('/coupons/verify')
    clickAndWait('link=验证券')
    type('id=eCouponSn','')
    click('id=query')
    verifyTextPresent('请输入券号!')
  
    type('id=eCouponSn','002')
    click('id=query')
    assertTitle('商户验证消费券')
#{/selenium}

#{selenium "更新消费状态"}
    #{include 'test/selenium/step/login.selenium' /}
    open('/coupons/verify')
    clickAndWait('link=验证券')
    type('id=eCouponSn','')
    click('id=query')
    verifyTextPresent('请输入券号!')
    
    type('id=eCouponSn','002')
    click('id=sure')
    verifyTextPresent('商户验证消费券')
#{/selenium}

