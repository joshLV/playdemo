#{extends 'layout_trader/layout.html' /}
#{get 'moreScripts'}
<script src="@{'/public/javascripts/kindeditor.js'}" type="text/javascript" charset="UTF-8"></script>
<script src="@{'/public/javascripts/zh_CN.js'}" type="text/javascript" charset="UTF-8"></script>
<script src="@{'/public/javascripts/plugins/code/prettify.js'}" type="text/javascript" charset="UTF-8"></script>
<script src="@{'/public/javascripts/My97DatePicker/WdatePicker.js'}" type="text/javascript" charset="UTF-8"></script>
#{/get}
#{include 'sales/Goods/nav.html' /}
<div class="body">
 <form class="form-horizontal" id="frm" name="frm"  action="@{Goods.update(goods.id)}" method="post" enctype="multipart/form-data">
  <legend>修改电子消费券</legend>
  <div class="control-group">
   <label for="select01" class="control-label">商品类型</label>
   <div class="controls">
    <select id="ca" class="input-small">
     <option value="">请选择</option>
    </select> <select id="select03" class="input-small">
     <option value="">请选择</option>
    </select> <select id="select03" class="input-small">
     <option value="">请选择</option>
    </select>
   </div>
  </div>
  <div class="control-group">
   <label for="select01" class="control-label">品&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;牌</label>
   <div class="controls">
    <select id="select03" class="input-small">
     <option>哈根达斯</option>
    </select>
   </div>
  </div>
  <div class="control-group">
   <label for="input01" class="control-label">商品编号</label>
   <div class="controls">
    <input type="text" id="no" name="goods.no" value="${goods.no}" class="input-xlarge" />
   </div>
  </div>
  <div class="control-group">
   <label for="input01" class="control-label">商品名称</label>
   <div class="controls">
    <input type="text" id="goods_name" name="goods.name" value="${goods.name}" class="input-xlarge" />
   </div>
  </div>
  <div class="control-group">
   <label for="input01" class="control-label">券有效期</label>
   <div class="controls">
    <input class="input-medium Wdate" type="text" id="expiredBeginOn" name="goods.expiredBeginOn" value="${goods.expiredBeginOn}"
     onfocus="WdatePicker({readOnly:true})" />至 <input class="input-medium Wdate" type="text" id="expiredEndOn"
     name="goods.expiredEndOn" value="${goods.expiredEndOn}" onfocus="WdatePicker({readOnly:true})" />
   </div>
  </div>
  <div class="control-group">
   <label for="input01" class="control-label">原&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;价</label>
   <div class="controls">
    <input type="text" id="originalPrice" name="goods.originalPrice" value="${goods.originalPrice}" class="input-small" />
   </div>
  </div>
  <div class="control-group">
   <label for="input01" class="control-label">现&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;价</label>
   <div class="controls">
    <input type="text" id="salePrice" name="goods.salePrice" value="${goods.salePrice}" class="input-small" />
   </div>
  </div>
  <div class="control-group">
   <label for="input01" class="control-label">库&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;存</label>
   <div class="controls">
    <input type="text" id="baseSale" name="goods.baseSale" value="${goods.baseSale}" class="input-small" />
   </div>
  </div>
  <div class="control-group">
   <label for="input01" class="control-label">商品图片</label>
   <div class="controls">
    <input type="file" id="imagePath" name="imagePath" class="input-file" />
   </div>
  </div>
  <div class="control-group">
   <label for="textarea" class="control-label">温馨提示</label>
   <div class="controls">
     <textarea name="goods.prompt" cols="100" rows="8" style="width:700px;height:200px;visibility:hidden;">${goods.prompt}</textarea>
   </div>
  </div>
  <div class="control-group">
   <label for="textarea" class="control-label">商品详情</label>
   <div class="controls">
    <textarea name="goods.details" cols="100" rows="8" style="width:700px;height:200px;visibility:hidden;">${goods.details}</textarea>
   </div>
  </div>
   <div class="control-group">
   <label for="textarea" class="control-label">使用门店</label>
   <div class="controls">
    <input type="radio" checked value="1" id="radios1" name="radios" />全部门店
    <input type="radio" value="2" id="radios2" name="radios" />部分门店
   </div>
   <div class="controls" id="shop" style="display:none">
     <table class="table table-striped table-bordered table-condensed">
     <tbody>
      #{list items:list, as:'row' }
      <tr>
       <td><input type="checkbox" id="checkoption" value="${row.id}" name="checkoption[]" /></td>
       <td>${row.name}</td>
       <td>${row.address}</td>
       <td>${row.phone}</td>
      </tr>
      #{/list}
     </tbody>
    </table>
   </div>
   
  </div>
  <div class="form-actions">
   <button class="btn btn-primary"  type="submit">保存</button>
   <input type="hidden" id="status" name="status"  value="0"/>
   <button class="btn btn-primary" id="view" type="submit">浏览</button>
   </div>
  </form>
  
 #{get 'moreScripts'}
<script type="text/javascript">
    KindEditor.ready(function(K) {
        var editor1 = K.create('textarea[name="goods.prompt"]', {
            cssPath : '/public/javascripts/plugins/code/prettify.css',
            uploadJson : 'kindeditor/upload_json.jsp',
            fileManagerJson : '/kindeditor/file_manager_json.jsp',
            allowFileManager : true,
            afterCreate : function() {
                var self = this;
                K.ctrl(document, 13, function() {
                    self.sync();
                    document.forms['frm'].submit();
                });
                K.ctrl(self.edit.doc, 13, function() {
                    self.sync();
                    document.forms['frm'].submit();
                });
            }
        });
        prettyPrint();
    });
    
    KindEditor.ready(function(K) {
        var editor1 = K.create('textarea[name="goods.details"]', {
             cssPath : '/public/javascripts/plugins/code/prettify.css',
            uploadJson : '/kindeditor/upload_json.jsp',
            fileManagerJson : 'kindeditor/file_manager_json.jsp',
            allowFileManager : true,
            afterCreate : function() {
                var self = this;
                K.ctrl(document, 13, function() {
                    self.sync();
                    document.forms['frm'].submit();
                });
                K.ctrl(self.edit.doc, 13, function() {
                    self.sync();
                    document.forms['frm'].submit();
                });
            }
        });
        prettyPrint();
    });
    
    $("#view").click(function() {
    	var fm = $("#frm");
      fm.attr("method", "GET");
      fm.attr("action", "@{Goods.preview(goods.id)}");
      fm.submit();
      return false;
        });  
   
   $("#radios2").click(function() {
        $("#shop").show();//显示
         });
   $("#radios1").click(function() {
       $("#shop").hide();//隐藏
        });
</script>
#{/get}
</div>


